dest_acc: "Yes"
perf_run_type: L1_TO_L1
loop_factor: 16

operations:
  - src_a: "input_A"
    src_b: "input_B"
    output: "datacopy_output"
    src_a_dims: [64, 64]
    src_b_dims: [64, 64]
    input_format: "Float16_b"
    output_format: "Float16_b"
    unpacker: "UnpackerA"
    math:
      fpu: "Datacopy"
      sfpu:
        - type: "UnarySfpu"
          operation: "Fill"
          approximation_mode: "No"
          iterations: 32
          dst_dest_tile_index: 2
          fill_const_value: 1.0
    packer: "Packer"
    math_fidelity: "LoFi"
    unpack_transpose_within_face: "Yes"
    unpack_transpose_faces: "No"

  - src_a: "datacopy_output"
    src_b: "input_B"
    output: "tilized_output"
    src_a_dims: [64, 64]
    src_b_dims: [64, 64]
    input_format: "Float16_b"
    output_format: "Float16_b"
    unpacker: "UnpackerTilizeA"
    math:
      fpu: "Datacopy"
      sfpu:
        - type: "UnarySfpu"
          operation: "Exp"
          approximation_mode: "No"
          iterations: 128
        - type: "UnarySfpu"
          operation: "Celu"
          approximation_mode: "No"
          iterations: 128
        - type: "BinarySfpu"
          operation: "SfpuElwadd"
          approximation_mode: "No"
          iterations: 32
          src1_dest_tile_index: 0
          src2_dest_tile_index: 1
          dst_dest_tile_index: 1
    packer: "Packer"
    math_fidelity: "LoFi"

  - src_a: "tilized_output"
    src_b: "X"
    output: "reduced_output"
    src_a_dims: [64, 64]
    src_b_dims: [64, 64]
    src_b_const_value: 1.0
    input_format: "Float16_b"
    output_format: "Float16_b"
    unpacker: "UnpackerAB"
    math:
      fpu: "ReduceColumn"
      reduce_pool: "Max"
      sfpu:
        - type: "BinarySfpu"
          operation: "SfpuElwadd"
          approximation_mode: "No"
          iterations: 8
          src1_dest_tile_index: 0
          src2_dest_tile_index: 1
          dst_dest_tile_index: 2
    packer: "Packer"
    math_fidelity: "HiFi4"

  - src_a: "reduced_output"
    src_b: "input_B"
    output: "elwadd1"
    src_a_dims: [64, 64]
    src_b_dims: [64, 64]
    input_format: "Float16_b"
    output_format: "Float16_b"
    unpacker: "UnpackerAB"
    math:
      fpu: "Elwadd"
      sfpu:
        - type: "UnarySfpu"
          operation: "Neg"
          approximation_mode: "No"
          iterations: 128
    packer: "Packer"
    math_fidelity: "HiFi3"
    dest_sync: "Full"
    unpack_transpose_within_face: "Yes"
    unpack_transpose_faces: "Yes"

  - src_a: "elwadd1"
    src_b: "datacopy_output"
    output: "matmul_result"
    src_a_dims: [64, 64]
    src_b_dims: [64, 64]
    input_format: "Float16_b"
    output_format: "Float32"
    unpacker: "MatmulUnpacker"
    math:
      fpu: "Matmul"
      sfpu:
        - type: "UnarySfpu"
          operation: "Abs"
          approximation_mode: "No"
          iterations: 128
        - type: "UnarySfpu"
          operation: "Sqrt"
          approximation_mode: "No"
          iterations: 128
    packer: "Packer"
    math_fidelity: "HiFi2"
    output_pack_dims: [32, 64]

  - src_a: "matmul_result"
    src_b: "input_C"
    output: "final_output"
    src_a_dims: [32, 64]
    src_b_dims: [64, 32]
    input_format: "Float32"
    output_format: "Float32"
    unpacker: "MatmulUnpacker"
    math:
      fpu: "Matmul"
      sfpu:
        - type: "UnarySfpu"
          operation: "Sqrt"
          approximation_mode: "No"
          iterations: 32
        - type: "BinarySfpu"
          operation: "SfpuElwadd"
          approximation_mode: "No"
          iterations: 32
          src1_dest_tile_index: 0
          src2_dest_tile_index: 0
          dst_dest_tile_index: 0
    packer: "Packer"
    math_fidelity: "LoFi"
    unpack_transpose_within_face: "Yes"
    unpack_transpose_faces: "Yes"
